{% extends "base.html" %}

{% block content %}
<h3>Your History:</h3>

<br><br>
{% if current_user.is_authenticated and current_user.isSeller %}
<h6>Your Inventory:</h6>

<a class="btn btn-secondary" href="{{ url_for('users.addinventory') }}" role="button">Add Inventory</a>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product Category</th>
      <th scope="col">Product Name</th>
      <th scope="col">Price</th>
      <th scope="col">Quantity</th>
      <th scope="col">Date</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    {% for purchase in purchase_history%}
      <tr>
        <th scope="row">{{purchase.category}}</th>
        <td>{{purchase.name}}</td>
        <td>{{purchase.price}}</td>
        <td>{{purchase.quantity}}</td>
        <td>{{purchase.release_date}}</td>
        <td> <a class="btn btn-secondary" 
          href="{{ url_for('users.update_inventory',iid = purchase.id) }}" 
          role="button">Update Inventory</a>

        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{%else%}
<p><a href="{{ url_for('users.login') }}">Log in</a> to see your purchase history!</p>

{% endif %}

{% if current_user.is_authenticated %}
<h6>Your Recent Purchases:</h6>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product Category</th>
      <th scope="col">Product Name</th>
      <th scope="col">Seller</th>
      <th scope="col">Price</th>
      <th scope="col">Quantity</th>
      <th scope="col">Review</th>
    </tr>
  </thead>
  <tbody>
    {% for purchase in purchase_history%}
      <tr>
        <th scope="row">{{purchase.id}}</th>
        <td>{{purchase.pid}}</td>
        <td>{{purchase.time_purchased}}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{%else%}
<p><a href="{{ url_for('users.login') }}">Log in</a> to see your purchase history!</p>

{% endif %}

{% endblock %}
